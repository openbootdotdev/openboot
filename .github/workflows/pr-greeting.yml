name: PR Greeting

on:
  pull_request_target:
    types: [opened]

permissions:
  pull-requests: write

jobs:
  greeting:
    runs-on: ubuntu-latest
    steps:
      - name: Greet new PR
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const isFirstPR = pr.author_association === 'FIRST_TIME_CONTRIBUTOR' || 
                              pr.author_association === 'NONE';
            
            let message = `ðŸ‘‹ Thanks for opening this pull request!\n\n`;
            
            if (isFirstPR) {
              message += `ðŸŽ‰ This is your first PR to OpenBoot â€” welcome!\n\n`;
            }
            
            message += `**Before merging:**\n`;
            message += `- [ ] Code follows existing patterns in the codebase\n`;
            message += `- [ ] \`go build ./...\` and \`go vet ./...\` pass\n`;
            message += `- [ ] Commit message is clear and descriptive\n\n`;
            message += `@fullstackjam will review this soon. Thanks for contributing! ðŸš€`;
            
            github.rest.issues.createComment({
              issue_number: pr.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });
